#include <kipr/wombat.h>

int main()
{

    int arm = 0;
    int claw = 2;
    int sarm = 891;
    int sclaw = 0;
    int down = 450;
    int close = 2047;
    int open = 1000;
    int up = 1875;
    //int up = 1726;
    enable_servos();

    set_servo_position(arm,sarm);
    msleep(500);

    set_servo_position(claw,sclaw);
    msleep(500);

    wait_for_light(0);

    shut_down_in(119);

    while (analog (3) <= 300)//drive to the black line out of the start box, then stop
    {
        motor(3,50);
        motor(0,50);
    }
    ao();
    msleep(500);

    motor(3,-10);//turn toward the line
    motor(0,80);
    msleep(1750);

    ao();
    msleep(500);

    motor(3,50);//drive onto the black line
    motor(0,50);
    msleep(1000);

    ao();
    msleep(500);

    while (analog (3) <= 300)//follow line to center black line, then stop
    {
        if (analog(5) >= 1225)//follow line
        {
            motor(0,100);
            motor(3,50);
        }
        else
        {
            motor(0,50);
            motor(3,100);
        }
    }
    ao();
    msleep(500);

    motor(0,100);//get over the center hump
    motor(3,95);
    msleep(1000);

    ao();
    msleep(500);


    while (analog (3) <= 300)//follow line to potato line then stop
    {
        if (analog(5) >= 1225)//follow line
        {
            motor(0,100);
            motor(3,50);
        }
        else
        {
            motor(0,50);           
            motor(3,100);
        }
    }

    ao();
    msleep(500);

    motor(0,50);//get on black line
    motor(3,50);
    msleep(850);

    motor(0,-50);//turn towards potato                                                                         
    motor(3,50);
    msleep(1450);

    ao();
    msleep(500);

    set_servo_position(arm,down);
    msleep(500);

    ao();
    msleep(500);

    motor(3,20);
    motor(0,20);//move closer to potato
    msleep(1000);

    ao();
    msleep(500);

    set_servo_position(claw,open);
    msleep(500);

    ao();
    msleep(800);

    ao();
    msleep(500);


    set_servo_position(claw,close);
    msleep(500);

    ao();
    msleep(1500);

    set_servo_position(arm,750);
    msleep(500);

    ao();
    msleep(500);

    motor(0,-100);//back up towards fryer
    motor(3,-100);
    msleep(1850);

    ao();
    msleep(500);

    set_servo_position(arm,up);
    msleep(500);

    ao();
    msleep(1000);

    set_servo_position(claw,open);
    msleep(500);

    ao();
    msleep(3000);
    // beggining of Sidni s part of code
    int startarm = 560;
    int startclaw = 290;
    int left = 730;
    int right = 0;
    int straight = 601;
    int forward = 600;
    int middle = 407;
    int back = 1298;
    int blose = 1825;

    enable_servos();

    set_servo_position(arm, startarm);//starting position for arm
    msleep(500);

    set_servo_position(claw, startclaw);//starting position for claw
    msleep(500);


    motor(0,96);
    motor(3,95);
    msleep(750);

    while (analog (3) <= 300)//drive to the black line out of the start box, then stop
    {
        motor(0,48);
        motor(3,47);
    }
    ao();
    msleep(500);

    motor(0,96);
    motor(3,95);
    msleep(500);

    motor(0,-50);//turn toward the line
    motor(3,50);
    msleep(1850);

    ao();
    msleep(500);

    motor(0,50);//drive onto the black line
    motor(3,50);
    msleep(800);

    ao();
    msleep(500);


    while (analog (5) <= 300)//follow line to center black line, then stop
    {
        if (analog(3) >= 1225)//follow line
        {
            motor(0,30);
            motor(3,100);
        }
        else
        {
            motor(0,100);
            motor(3,30);
        }
    }

    ao();
    msleep(500);

    set_servo_position(arm, up);
    msleep(500);

    motor(3,50);
    motor(0,50);
    msleep(850);

    while (analog(5) <= 300)//follow black line to grab Botguy
    {
        motor(0,50);
        motor(3,-50);
    } 

    motor(0,100);
    motor(3,0);
    msleep(1500);

    while (analog(5) <= 300)
    {
        motor(0,50);
        motor(3,-50);
    } 

    motor(0,100);
    motor(3,100);
    msleep(1500);

    ao();
    msleep(500);

    set_servo_position(arm, forward);
    msleep(500);

    ao();
    msleep(500);

    set_servo_position(claw, close);
    msleep(500);

    motor(0,-96);//move away pvc
    motor(3,-95);
    msleep(1000);

    ao();
    msleep(500);


    while (analog (5) <= 300)//turn until you see the black line
    {
        motor(0,96);
        motor(3,-10);
    }
    ao();
    msleep(500);


    while (analog (5) <= 300)//follow line to start box, then stop
    {
        if (analog(3) >= 1225)//follow line
        {
            motor(0,30);
            motor(3,100);
        }
        else
        {
            motor(0,50);
            motor(3,100);
        }
    }
    ao();
    msleep(500);


    set_servo_position(arm, middle);
    msleep(500);
    set_servo_position(claw, open);
    msleep(500);

    disable_servos();



    return 0;
}
